"0","dsCamposOriginales <- read.csv(""./input/campos.csv"",sep="";"",stringsAsFactors = FALSE)"
"0",""
"0","dsCamposOriginales <- dsCamposOriginales %>%"
"0","  mutate_if(is.factor, as.character) "
"0",""
"0","# Obtengo campos actuales en dsDataAll"
"0","dsCamposActuales <- data.frame(unlist(sapply(dsDataAll, class))) %>%"
"0","  select(Tipo = 1) %>%"
"0","  rownames_to_column(""CampoNuevo"") %>%"
"0","  filter(CampoNuevo != ""Id"" & CampoNuevo != ""indTrain"")"
"0",""
"0","# Para los nuevos campos Dummies busco los campos origen"
"0","dsCamposNominalDummy <- dsCamposActuales %>%"
"0","  filter(grepl('[_]', CampoNuevo)) %>%"
"0","  mutate(CampoOrigen = sub(""_.*"", """", CampoNuevo)) %>%"
"0","  select(CampoNuevo, CampoOrigen)"
"0",""
"0","dsCamposActuales <- dsCamposActuales %>%"
"0","  left_join(dsCamposNominalDummy,by = ""CampoNuevo"") %>%"
"0","  mutate(CampoOrigen = ifelse(is.na(CampoOrigen),CampoNuevo,CampoOrigen)) %>%"
"0","  mutate(CampoOrigen = ifelse(CampoNuevo==""StreetPave"",""Street"",CampoOrigen))"
"0",""
"0","# Busco se"
"0","dsCamposActuales <- dsCamposActuales %>%"
"0","  inner_join(dsCamposOriginales, by = c(""CampoOrigen"" = ""Campo"")) %>%"
"0","  select(CampoNuevo, CampoOrigen, Segmento,Subsegmento)%>% "
"0","  rename(Campo = CampoNuevo) %>%"
"0","  mutate(grupo = paste(Segmento,Subsegmento,sep=""-""))"
"0",""
"0","# VerificaciÃ³n de los grupos que se han formado"
"0","# dsCamposActuales %>% "
"0","#   group_by(grupo) %>% "
"0","#   tally()"
"0",""
"0","grupos <- distinct(dsCamposActuales,  grupo) %>% filter(grupo != '-')"
"0","grupos <- grupos[,1]"
"0",""
"0","rm(dsCamposOriginales)"
"0","rm(dsCamposNominalDummy)"
"0",""
